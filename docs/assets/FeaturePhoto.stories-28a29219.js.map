{"version":3,"file":"FeaturePhoto.stories-28a29219.js","sources":["../../src/components/FeaturePhoto/stories/docs/component.md?raw","../../src/components/FeaturePhoto/stories/docs/quickit.md?raw","../../src/components/FeaturePhoto/stories/docs/missingAltText.md?raw","../../src/components/FeaturePhoto/FeaturePhoto.svelte","../../src/components/FeaturePhoto/stories/shark.jpg","../../src/components/FeaturePhoto/FeaturePhoto.stories.svelte"],"sourcesContent":["export default \"A full-width photo inside the text well.\\n\\n```svelte\\n<script>\\n  import { FeaturePhoto } from '@reuters-graphics/graphics-components';\\n  import { assets } from '$app/paths'; // ðŸ‘ˆ If using in the Graphics Kit...\\n</script>\\n\\n<FeaturePhoto\\n  src=\\\"{`${assets}/images/myImage.jpg`}\\\"\\n  altText=\\\"Some alt text\\\"\\n  caption=\\\"A caption\\\"\\n  lazy=\\\"{false}\\\"\\n  width=\\\"normal\\\"\\n/>\\n```\\n\"","export default \"An example of using `FeaturePhoto` in the Graphics Kit with a Google Doc.\\n\\n```yaml\\n# Google doc block\\nType: photo\\nWidth: normal\\nSrc: images/shark.jpg\\nAltText: The king of the sea\\nCaption: Carcharodon carcharias - REUTERS\\n```\\n\\n```svelte\\n<!-- App.svelte -->\\n<script>\\n  // Add FeaturePhoto to imports from graphics-components\\n  import { FeaturePhoto } from '@reuters-graphics/graphics-components';\\n\\n  // These should be already imported for you.\\n  import content from '$locales/en/content.json';\\n  import { assets } from '$app/paths';\\n</script>\\n\\n{#each content.blocks as block}\\n  {#if block.Type === 'text'}\\n    <!-- ... other blocks -->\\n\\n    <!-- Copy/paste into your blocks loop! -->\\n  {:else if block.Type === 'photo'}\\n    <FeaturePhoto\\n      width=\\\"{block.Width}\\\"\\n      src=\\\"{`${assets}/${block.Src}`}\\\"\\n      altText=\\\"{block.AltText}\\\"\\n      caption=\\\"{block.Caption}\\\"\\n    />\\n    <!-- END copy/paste -->\\n  {/if}\\n{/each}\\n```\\n\"","export default \"If your photo is missing `altText` a small warning will overlay the image.\\n\"","<!-- @component `FeaturePhoto` [Read the docs.](https://reuters-graphics.github.io/graphics-components/?path=/docs/components-FeaturePhoto--default) -->\n<script lang=\"ts\">\n  import { onMount } from 'svelte';\n  import Block from '../Block/Block.svelte';\n  import type { ContainerWidth } from '../@types/global';\n  import PaddingReset from '../PaddingReset/PaddingReset.svelte';\n\n  /**\n   * Photo src\n   * @type {string}\n   * @required\n   */\n  export let src: string;\n  /**\n   * Photo altText\n   * @type {string}\n   * @required\n   */\n  export let altText: string;\n  /**\n   * Add an id to target with custom CSS.\n   * @type {string}\n   */\n  export let id: string = '';\n  /**\n   * Add extra classes to target with custom CSS.\n   * @type {string}\n   */\n  let cls: string = '';\n  export { cls as class };\n  /**\n   * Caption below the photo\n   * @type {string}\n   */\n  export let caption: string;\n  /**\n   * Height of the photo placeholder when lazy-loading\n   */\n  export let height: number = 100;\n  /**\n   * Width of the container, one of: normal, wide, wider, widest or fluid\n   */\n  export let width: ContainerWidth = 'normal';\n\n  /**\n   * Set a different width for the text within the text well, for example,\n   * \"normal\" to keep the title, description and notes inline with the rest\n   * of the text well. Can't ever be wider than `width`.\n   * @type {string}\n   */\n  export let textWidth: ContainerWidth | null = 'normal';\n\n  /**\n   * Whether to lazy load the photo using the [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n   */\n  export let lazy: boolean = false;\n  /** Set Intersection Observer [rootMargin](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#rootmargin) `top` when lazy loading. */\n  export let top = 0;\n  /** Set Intersection Observer [rootMargin](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#rootmargin) `bottom` when lazy loading. */\n  export let bottom = 0;\n  /** Set Intersection Observer [rootMargin](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#rootmargin) `left` when lazy loading. */\n  export let left = 0;\n  /** Set Intersection Observer [rootMargin](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#rootmargin) `right` when lazy loading. */\n  export let right = 0;\n\n  let intersecting = false;\n  let container;\n  const intersectable = typeof IntersectionObserver !== 'undefined';\n\n  onMount(() => {\n    if (!lazy) return;\n    if (intersectable) {\n      const rootMargin = `${bottom}px ${left}px ${top}px ${right}px`;\n\n      const observer = new IntersectionObserver(\n        (entries) => {\n          intersecting = entries[0].isIntersecting;\n          if (intersecting) {\n            observer.unobserve(container);\n          }\n        },\n        {\n          rootMargin,\n        }\n      );\n\n      observer.observe(container);\n      return () => observer.unobserve(container);\n    }\n  });\n</script>\n\n<Block width=\"{width}\" class=\"photo fmy-6 {cls}\" id=\"{id}\">\n  <figure\n    bind:this=\"{container}\"\n    aria-label=\"media\"\n    class=\"w-full flex flex-col relative\"\n  >\n    {#if !lazy || (intersectable && intersecting)}\n      <img class=\"w-full my-0\" src=\"{src}\" alt=\"{altText}\" />\n    {:else}\n      <div class=\"placeholder w-full\" style=\"{`height: ${height}px;`}\"></div>\n    {/if}\n    {#if caption}\n      <PaddingReset containerIsFluid=\"{width === 'fluid'}\">\n        <Block width=\"{textWidth}\" class=\"fmx-auto fmy-0\">\n          <figcaption>\n            {caption}\n          </figcaption>\n        </Block>\n      </PaddingReset>\n    {/if}\n    {#if !altText}\n      <div class=\"alt-warning absolute text-xxs py-1 px-2\">altText</div>\n    {/if}\n  </figure>\n</Block>\n\n<style lang=\"scss\">\n  .placeholder {\n    background-color: #ccc;\n  }\n\n  div.alt-warning {\n    background-color: red;\n    color: white;\n    top: 0;\n    right: 0;\n  }\n</style>\n","export default \"__VITE_ASSET__d597932c__\"","<script>\n  import { Meta, Template, Story } from '@storybook/addon-svelte-csf';\n\n  // @ts-ignore\n  import componentDocs from './stories/docs/component.md?raw';\n  // @ts-ignore\n  import quickitDocs from './stories/docs/quickit.md?raw';\n  // @ts-ignore\n  import missingAltTextDocs from './stories/docs/missingAltText.md?raw';\n\n  import FeaturePhoto from './FeaturePhoto.svelte';\n\n  // @ts-ignore\n  import sharkSrc from './stories/shark.jpg';\n\n  import {\n    withComponentDocs,\n    withStoryDocs,\n  } from '$lib/docs/utils/withParams.js';\n\n  const metaProps = {\n    ...withComponentDocs(componentDocs),\n    argTypes: {\n      width: {\n        control: 'select',\n        options: ['normal', 'wide', 'wider', 'widest', 'fluid'],\n      },\n      textWidth: {\n        control: 'select',\n        options: ['normal', 'wide', 'wider', 'widest', 'fluid'],\n      },\n    },\n  };\n</script>\n\n<Meta\n  title=\"Components/FeaturePhoto\"\n  component=\"{FeaturePhoto}\"\n  {...metaProps}\n/>\n\n<Template let:args>\n  <FeaturePhoto {...args} />\n</Template>\n\n<Story\n  name=\"Default\"\n  args=\"{{\n    src: sharkSrc,\n    altText: 'A shark!',\n    width: 'normal',\n    caption: 'Carcharodon carcharias - REUTERS',\n  }}\"\n/>\n\n<Story\n  name=\"ðŸš€ QUICKIT\"\n  args=\"{{\n    src: sharkSrc,\n    altText: 'A shark!',\n    width: 'normal',\n    caption: 'Carcharodon carcharias - REUTERS',\n  }}\"\n  {...withStoryDocs(quickitDocs)}\n/>\n\n<Story\n  name=\"Missing altText\"\n  args=\"{{\n    src: sharkSrc,\n    width: 'normal',\n    caption: 'Carcharodon carcharias - REUTERS',\n  }}\"\n  {...withStoryDocs(missingAltTextDocs)}\n/>\n"],"names":["componentDocs","quickitDocs","missingAltTextDocs","ctx","insert","target","div","anchor","attr","img","img_src_value","dirty","paddingreset_changes","figcaption","create_if_block_2","create_if_block_1","create_if_block","figure","src","$$props","altText","id","cls","caption","height","width","textWidth","lazy","top","bottom","left","right","intersecting","container","intersectable","onMount","rootMargin","observer","entries","$$invalidate","$$value","sharkSrc","FeaturePhoto","withStoryDocs","withComponentDocs"],"mappings":"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"}