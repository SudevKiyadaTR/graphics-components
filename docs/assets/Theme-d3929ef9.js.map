{"version":3,"file":"Theme-d3929ef9.js","sources":["../../src/components/Theme/utils/flatten.js","../../src/components/Theme/utils/merge.js","../../src/components/Theme/Theme.svelte"],"sourcesContent":["function isBuffer(obj) {\n  return (\n    obj &&\n    obj.constructor &&\n    typeof obj.constructor.isBuffer === 'function' &&\n    obj.constructor.isBuffer(obj)\n  );\n}\n\nconst transformKey = (key) => key.replace(/[^a-z0-9-]/gi, '');\n\nexport default function flatten(target) {\n  const delimiter = '-';\n  const output = {};\n\n  function step(object, prev, currentDepth = 1) {\n    Object.keys(object).forEach(function (key) {\n      const value = object[key];\n      const isArray = Array.isArray(value);\n      const type = Object.prototype.toString.call(value);\n      const isbuffer = isBuffer(value);\n      const isObject = type === '[object Object]' || type === '[object Array]';\n\n      const newKey = prev\n        ? prev + delimiter + transformKey(key)\n        : transformKey(key);\n\n      if (!isArray && !isbuffer && isObject && Object.keys(value).length) {\n        return step(value, newKey, currentDepth + 1);\n      }\n\n      output[newKey] = value;\n    });\n  }\n\n  step(target);\n\n  return output;\n}\n","function isObject(item) {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\n/**\n * Deep merges theme objects.\n */\nexport default function merge(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        merge(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n  return merge(target, ...sources);\n}\n","<!-- @component `Theme` [Read the docs.](https://reuters-graphics.github.io/graphics-components/?path=/docs/theming-Theme--default) -->\n<script context=\"module\" lang=\"ts\">\n  import light from './themes/light.js';\n  import dark from './themes/dark.js';\n  /**\n   * Pre-made themes you can import.\n   * @type {{ light, dark }}\n   */\n  export const themes = { light, dark };\n</script>\n\n<script lang=\"ts\">\n  import type { CustomTheme } from './@types/component';\n  /** Custom theme object. Can be a partial theme with just\n   * what you want to change.\n   */\n  export let theme: CustomTheme = {};\n\n  type Base = 'light' | 'dark';\n  /**\n   * Base theme is one of `light` or `dark` and will be merged\n   * with your custom theme to fill in any values you don't\n   * explicitly set.\n   */\n  export let base: Base = 'light';\n\n  import flatten from './utils/flatten';\n  import mergeThemes from './utils/merge';\n\n  /** @type {Theme} */\n  $: mergedTheme = mergeThemes({}, themes[base] || themes.light, theme);\n\n  $: cssVariables = Object.entries(flatten({ theme: mergedTheme }))\n    .map(([key, value]) => `--${key}: ${value};`)\n    .join(' ');\n</script>\n\n<div class=\"theme\" style=\"{cssVariables}\" style:display=\"contents\">\n  <!-- Clients can override the theme above by attaching custom properties to this element. -->\n  <div class=\"theme-client-override\" style=\"display: contents;\">\n    <!-- Themed content -->\n    <slot />\n  </div>\n</div>\n"],"names":["isBuffer","obj","transformKey","key","flatten","target","delimiter","output","step","object","prev","currentDepth","value","isArray","type","isbuffer","isObject","newKey","item","merge","sources","source","ctx","insert","div1","anchor","append","div0","themes","light","dark","theme","$$props","base","$$invalidate","mergedTheme","mergeThemes","cssVariables"],"mappings":"yLAAA,SAASA,EAASC,EAAK,CACrB,OACEA,GACAA,EAAI,aACJ,OAAOA,EAAI,YAAY,UAAa,YACpCA,EAAI,YAAY,SAASA,CAAG,CAEhC,CAEA,MAAMC,EAAgBC,GAAQA,EAAI,QAAQ,eAAgB,EAAE,EAE7C,SAASC,EAAQC,EAAQ,CACtC,MAAMC,EAAY,IACZC,EAAS,CAAA,EAEf,SAASC,EAAKC,EAAQC,EAAMC,EAAe,EAAG,CAC5C,OAAO,KAAKF,CAAM,EAAE,QAAQ,SAAUN,EAAK,CACzC,MAAMS,EAAQH,EAAON,CAAG,EAClBU,EAAU,MAAM,QAAQD,CAAK,EAC7BE,EAAO,OAAO,UAAU,SAAS,KAAKF,CAAK,EAC3CG,EAAWf,EAASY,CAAK,EACzBI,EAAWF,IAAS,mBAAqBA,IAAS,iBAElDG,EAASP,EACXA,EAAOJ,EAAYJ,EAAaC,CAAG,EACnCD,EAAaC,CAAG,EAEpB,GAAI,CAACU,GAAW,CAACE,GAAYC,GAAY,OAAO,KAAKJ,CAAK,EAAE,OAC1D,OAAOJ,EAAKI,EAAOK,EAAQN,EAAe,CAAC,EAG7CJ,EAAOU,CAAM,EAAIL,CACvB,CAAK,CACF,CAED,OAAAJ,EAAKH,CAAM,EAEJE,CACT,CCtCA,SAASS,EAASE,EAAM,CACtB,OAAOA,GAAQ,OAAOA,GAAS,UAAY,CAAC,MAAM,QAAQA,CAAI,CAChE,CAKe,SAASC,EAAMd,KAAWe,EAAS,CAChD,GAAI,CAACA,EAAQ,OAAQ,OAAOf,EAC5B,MAAMgB,EAASD,EAAQ,QAEvB,GAAIJ,EAASX,CAAM,GAAKW,EAASK,CAAM,EACrC,UAAWlB,KAAOkB,EACZL,EAASK,EAAOlB,CAAG,CAAC,GACjBE,EAAOF,CAAG,GAAG,OAAO,OAAOE,EAAQ,CAAE,CAACF,CAAG,EAAG,CAAE,CAAA,CAAE,EACrDgB,EAAMd,EAAOF,CAAG,EAAGkB,EAAOlB,CAAG,CAAC,GAE9B,OAAO,OAAOE,EAAQ,CAAE,CAACF,CAAG,EAAGkB,EAAOlB,CAAG,CAAC,CAAE,EAIlD,OAAOgB,EAAMd,EAAQ,GAAGe,CAAO,CACjC,2MCe2BE,EAAY,CAAA,CAAA,oCAAvCC,EAMKlB,EAAAmB,EAAAC,CAAA,EAJHC,EAGKF,EAAAG,CAAA,yHALoBL,EAAY,CAAA,CAAA,0GA7BxBM,EAAM,CAAK,MAAAC,EAAO,KAAAC,CAAI,wDAQxB,MAAAC,EAAK,EAAA,EAAAC,EAQL,CAAA,KAAAC,EAAa,OAAO,EAAAD,2IAM5BE,EAAA,EAAAC,EAAcC,EAAgB,CAAA,EAAAR,EAAOK,CAAI,GAAKL,EAAO,MAAOG,CAAK,CAAA,gBAEnEG,EAAA,EAAEG,EAAe,OAAO,QAAQjC,EAAU,CAAA,MAAO+B,KAC/C,IAAG,CAAA,CAAGhC,EAAKS,CAAK,IAAA,KAAWT,CAAG,KAAKS,CAAK,GAAA,EACxC,KAAK,GAAG,CAAA;"}